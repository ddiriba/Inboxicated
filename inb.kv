#:kivy 2.0.0
#:import Clock kivy.clock.Clock
WindowManager:
        MainScreen:
                id: main
        RetrieveScreen:
                id: retrieve
        SummonScreen:
                id: summon
        AssignScreen:
                id: assign
        DepositScreen:
                id: deposit
        AddKeeperScreen:
                id: add
        ReportProblemScreen:
                id: problem
        LoadingScreen:
                id: loading
                name: 'loading'
        FaceDetectionScreen:
                id: detect
                name: 'detect'

<MainScreen>:
        name: 'main'
        GridLayout:
                cols: 1
                rows: 2
                size_hint: (1, 1)
                pos_hint: {"center_x": 0.5, "center_y":0.5}

                Image: 
                        source: 'inbox_black.png'
                        size_hint_x: 1.2
                        allow_stretch: True
                GridLayout:
                        cols: 4
                        rows: 2
                        size_hint: (0.4, 0.4)
                        pos_hint: {"center_x": 0.3, "center_y":0.3}
                        spacing: 5
                        Label:
                                # leave it blank
                        Button:
                                background_color: '#0000FF'
                                text: "Deposit Keys"
                                on_release: 
                                        app.root.current = "deposit"
                                        root.manager.transition.direction = "left"
                        Button:
                                background_color: '#0000FF'
                                text: "Retrieve Keys"
                        Label:
                                # leave it blank
                        Label:
                                # leave it blank
                        Button:
                                background_color: '#0000FF'
                                text: "Assign New Keeper"
                                on_release: 
                                        app.root.current = "assign"
                                        root.manager.transition.direction = "left"
                        Button:
                                background_color: '#0000FF'
                                text: "Summon the Keepers"
                        Button:
                                text: "Report a bug" 
                                on_release:
                                        app.root.current = "problem"
                                        root.manager.transition.direction = "left"     
<DepositScreen>:
        name: 'deposit'
        MDBoxLayout:
                orientation: 'vertical'
                padding: 40
                spacing: 50
                MDLabel:
                        id: deposit_label
                        halign: 'center'
                        text: "Deposit Keys"
                        font_size: 50
                        pos_hint: {'center_x': 0.5, 'center_y': 0.5}
                        padding_y: 15
                MDCard:
                        size_hint: None, None
                        size: 300, 300
                        pos_hint: {"center_x": 0.5, "center_y": 0.5}
                        elevation: 10
                        padding: 25
                        spacing: 25
                        orientation: 'vertical'
                        MDTextFieldRound:
                                id: full_name
                                hint_text: "Full Name"
                                icon_left: "account"
                                size_hint_x: None
                                width: 200
                                font_size: 18
                                pos_hint: {"center_x": 0.5}

                        MDTextFieldRound:
                                id: phone
                                hint_text: "Phone Number"
                                icon_left: "phone"
                                size_hint_x: None
                                width: 200
                                font_size: 18
                                pos_hint: {"center_x": 0.5}
                        MDRoundFlatButton:
                                text: "Enter Contact Info"
                                font_size: 12
                                on_release: app.enter_info()
                                pos_hint: {'center_x': 0.5}
                        MDRoundFlatButton:
                                text: "Clear"
                                font_size: 12
                                on_release: app.clear_deposit_info()
                                pos_hint: {'center_x': 0.5}

                MDRaisedButton:
                        text: 'Go Back'
                        on_release: 
                                app.root.current = 'main'
                                root.manager.transition.direction = "right"
                        pos_hint: {'center_x': 0.5, 'center_y': 0.5}

<AssignScreen>:
        name: 'assign'
        MDBoxLayout:
                orientation: 'vertical'
                padding: 40
                spacing: 50
                MDLabel:
                        id: assign_label
                        halign: 'center'
                        text: "Assign New Keeper"
                        font_size: 50
                        pos_hint: {'center_x': 0.5, 'center_y': 0.5}
                        padding_y: 15
                MDCard:
                        size_hint: None, None
                        size: 300, 300
                        pos_hint: {"center_x": 0.5, "center_y": 0.5}
                        elevation: 10
                        padding: 25
                        spacing: 25
                        orientation: 'vertical'
                        MDLabel:
                                id: login_label
                                halign: 'center'
                                text: "Main Keeper Login"
                                font_size: 18
                                pos_hint: {'center_x': 0.5, 'center_y': 0.5}
                                padding_y: 15
                        MDTextFieldRound:
                                id: user
                                hint_text: "Username"
                                icon_left: "account"
                                size_hint_x: None
                                width: 200
                                font_size: 18
                                pos_hint: {"center_x": 0.5}

                        MDTextFieldRound:
                                id: password
                                hint_text: "Password"
                                icon_left: "key-variant"
                                icon_right: "eye-off"
                                size_hint_x: None
                                width: 200
                                font_size: 18
                                pos_hint: {"center_x": 0.5}
                                password: True
                        MDRoundFlatButton:
                                text: "Log in"
                                font_size: 12
                                on_release: app.check_login()
                                pos_hint: {'center_x': 0.5}
                        MDRoundFlatButton:
                                text: "Clear"
                                font_size: 12
                                on_release: app.clear_assign_info()
                                pos_hint: {'center_x': 0.5}        
                MDRaisedButton:
                        text: 'Go Back'
                        on_release: 
                                app.root.current = 'main'
                                root.manager.transition.direction = "right"
                        pos_hint: {'center_x': 0.5, 'center_y': 0.5}

<AddKeeperScreen>:
        name: 'add'
        MDBoxLayout:
                orientation: 'vertical'
                padding: 40
                spacing: 50
                MDCard:
                        size_hint: None, None
                        size: 400, 300
                        pos_hint: {"center_x": 0.5, "center_y": 0.5}
                        elevation: 10
                        padding: 25
                        spacing: 25
                        orientation: 'vertical'
                        MDLabel:
                                text: "Add New Keeper"
                                halign: 'center'
                                font_size: 18
                                pos_hint: {'center_x': 0.5, 'center_y': 0.5}
                                #padding_y: 15
                        MDTextFieldRound:
                                id: full_name
                                hint_text: "Full Name"
                                icon_left: "account"
                                size_hint_x: None
                                width: 300
                                font_size: 18
                                pos_hint: {"center_x": 0.5}

                        MDTextFieldRound:
                                id: phone
                                hint_text: "Phone Number"
                                icon_left: "phone"
                                size_hint_x: None
                                width: 300
                                font_size: 18
                                pos_hint: {"center_x": 0.5}
                        MDRoundFlatButton:
                                text: "Submit"
                                font_size: 12
                                on_release: app.add_keeper()
                                pos_hint: {'center_x': 0.5}
                        MDRoundFlatButton:
                                text: "Clear"
                                font_size: 12
                                on_release: app.clear_add_info()
                                pos_hint: {'center_x': 0.5}        
                MDRaisedButton:
                        text: 'Cancel'
                        on_release: 
                                app.root.current = 'main'
                                root.manager.transition.direction = "right"
                        pos_hint: {'center_x': 0.5, 'center_y': 0.5}
                
<ReportProblemScreen>:
        name: 'problem'
        AnchorLayout: 
                orientation: 'vertical'
                halign: 'center'
                padding: 20
                MDTextField:
                        id: report
                        size_hint: (0.8, 0.8)
                        orientation: 'vertical'
                        hint_text: "Briefly explain what happened or what is not working." 
                        mode: "rectangle"
                        multiline: True
                        height: 200
                        width: 300
                        pos_hint: {'center_x': 0.5,'center_y': 0.5}
                BoxLayout:
                        orientation: 'horizontal'
                        pos_hint: {"center_x": 0.5, 'center_y': 0.5}
                        halign: 'center'
                        spacing: 15
                        MDRoundFlatButton:
                                text: "submit"
                                on_release: 
                                        app.send_report()
                                        app.clean_report_box()
                        MDRoundFlatButton:
                                text: "cancel"
                                on_release: 
                                        app.clean_report_box()
                                        app.root.current = 'main'
                                        root.manager.transition.direction = "right"

<FaceDetectionScreen>:
        MDBoxLayout:
                id: layout
                orientation: 'vertical'
                MDLabel:
                        text: "Look at the Camera"
                        size_hint: (1, .1)
                        halign: 'center'
                        font_size: 18
                        pos_hint: {'center_x': 0.5, 'center_y': 0.5}
                Image:
                        id: web_cam
                        name: 'web_cam'
                        size_hint: (.8,.8)
                        allow_stretch: True
                        keep_ratio: True
                MDRoundFlatButton:
                        text: "cancel"
                        pos_hint: {'center_x': 0.5}
                        on_release: 
                                app.root.current = 'main'
                                root.manager.transition.direction = "right"